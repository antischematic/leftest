"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[420],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},f=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),f=r,m=u["".concat(c,".").concat(f)]||u[f]||d[f]||a;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}f.displayName="MDXCreateElement"},3229:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=n(7462),r=(n(7294),n(3905));const a={sidebar_position:4},i="Hooks",s={unversionedId:"guide/hooks",id:"guide/hooks",title:"Hooks",description:"This API is stable.",source:"@site/docs/guide/hooks.md",sourceDirName:"guide",slug:"/guide/hooks",permalink:"/leftest/docs/guide/hooks",draft:!1,editUrl:"https://github.com/antischematic/leftest/tree/main/packages/create-docusaurus/templates/shared/docs/guide/hooks.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Context",permalink:"/leftest/docs/guide/context"},next:{title:"Tags",permalink:"/leftest/docs/guide/tags"}},c={},l=[{value:"Scenario hooks",id:"scenario-hooks",level:2},{value:"Step hooks",id:"step-hooks",level:2},{value:"Hook execution order",id:"hook-execution-order",level:2}],p={toc:l},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"hooks"},"Hooks"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This API is stable.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Keep hooks separate from your feature specs. Keep them in a separate file, or together with your steps.")),(0,r.kt)("p",null,"Hooks allow you execute code before or after each scenario or step runs. This can be useful for recording and replaying network traffic, taking screenshots at the end of every test, or setting up interceptors to name a few examples."),(0,r.kt)("h2",{id:"scenario-hooks"},"Scenario hooks"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"import { beforeScenario, afterScenario } from '@antischematic/leftest'\n\nbeforeScenario((scenario) => {\n   console.log(scenario.name)\n})\n\nafterScenario((scenario) => {\n   console.log(scenario.name)\n})\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"beforeScenario")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"afterScenario")," hooks receive a ",(0,r.kt)("inlineCode",{parentName:"p"},"ReadonlyScenario")," argument representing the current scenario that is being executed. The ",(0,r.kt)("inlineCode",{parentName:"p"},"afterScenario")," hook will always run even if the test fails."),(0,r.kt)("h2",{id:"step-hooks"},"Step hooks"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"import { beforeStep, afterStep } from '@antischematic/leftest'\n\nbeforeStep((scenario) => {\n   console.log(scenario.name)\n})\n\nafterStep((scenario) => {\n   console.log(scenario.name)\n})\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"beforeStep")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"afterStep")," hooks receive a ",(0,r.kt)("inlineCode",{parentName:"p"},"ReadonlyScenario")," argument representing the current scenario that is being executed."),(0,r.kt)("h2",{id:"hook-execution-order"},"Hook execution order"),(0,r.kt)("p",null,"The order of execution for hooks in each scenario are:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"beforeScenario")," once"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"beforeStep")," once per step"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"afterStep")," once per step"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"afterScenario")," once")),(0,r.kt)("p",null,"Hooks of the same type are run in the order they are declared."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Avoid writing hooks that depend on the execution order.")))}d.isMDXComponent=!0}}]);